{% extends "choralcentral_base.html" %}
{% block title %}Requests{% endblock %}
{% block introduction %}{% endblock introduction %}

{% block content_content %}
<div class='container request-index-heading'>
    <div class='row'>
        <div class='col-sm-12'>
            <span class='h5 float-left'>Requests</span>
            <span class='float-right'><a href='/request/' title='Go back'><i class='fas fa-arrow-left'></i></a></span>
        </div>
    </div>
</div>

{% for request in requests %}
    <div class="list-requests">
        <h4><a href="{% url 'request:detail' request.pk request.slug %}" title="Request for {{ request }}">{{ request }}</a></h4>

        <h6><em>
            <a href="{% url 'siteuser:library' request.originator.pk request.originator.slug %}">{{request.originator.screen_name }}</a>
            | {{ request.created|date }}
            </em>
        </h6>

        <div>
            <span class="h5 float-right">
                <a class="btn btn-sm btn-primary icon-buttons" href="{% url 'request:filter' %}?status={{ request.status }}">{% if request.status %}Fulfilled{% else %}Unfulfilled{% endif %}</a>
                <a class="btn btn-sm btn-primary icon-buttons" href="{% url 'request:reply_new_from_request' request.pk %}" title="Reply"><i class="fas fa-reply" aria-hidden="true"></i></a>

                <span class="btn btn-sm btn-primary icon-buttons" title="Replies">
                    {{ request.reply_set.count }}
                </span>
            </span>
        </div>
    </div>
{% empty %}
    <p>No request at the moment.</p>
{% endfor %}

{% endblock content_content %}

