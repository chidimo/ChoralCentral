As of version 5.5, schema.xml is now managed-schema. See here
https://stackoverflow.com/questions/36033432

Help: http://www.alexanderinteractive.com/blog/2012/08/getting-started-with-solr-and-django/


Configuring solr
==================

Configuring with solr 7.1.0
-----------------------------
1. Start solr on windows ::

    .\bin\solr start

2. Create a solr core named `blog_solr7_1_0` ::

    .\bin\solr create -c blog_solr7_1_0

The created solr core folder resides in */solr-7.1.0/server/solr

3. Set URL in `HAYSTACK_CONNECTIONS` in `settings.py` file to `http://127.0.0.1:8983/solr/blog_solr7_1_0`
4. Run ::

    python manage.py build_solr_schema

5. Run ::

    python manage.py rebuild_index

6. This page https://django-haystack.readthedocs.io/en/master/management_commands.html#build-solr-schema
offers info on configuring solr core using haystack commands. ::

    python manage.py build_solr_schema --configure-directory <dir path>
    
does some magic on the directory. This directory is the `conf` directory of a solr core.

On restarting solr it refuse to load a created core because of this "Setting defaultSearchField in schema not supported since Solr 7"
This field is created in the schema.xml generated by haystack.

In the settings.py file, to set the solr core for your indexed document destination,
 in the URL argument, use ::

    ''http://127.0.0.1:8983/solr/blog_solr7_1_0''

rather than ::

    'http://127.0.0.1:8983/solr/#/blog' # does not support POST request

Issues

django-haystack==2.6.1 doesn't work with Django==1.11.6

To fix it I followed this https://stackoverflow.com/questions/45739518

Then installed a fixed haystack from here ::

    pip install django-haystack==2.7.dev0

Then schema was generated successfully.

More on the issues here https://stackoverflow.com/questions/46378459
setting HAYSTACK_ID_FIELD = 1 didn't work for me

Configuring with solr 4.10.4
-----------------------------------
This follows Antonio Mele's book, Django by example - Chapter 3

1. Start solr on windows ::

     .\bin\solr start

2. Create a solr core named `blog_solr_4_10_4` with following steps
    a. Navigate to `*\solr-4.10.4\example\solr`
    b. Create a folder named `blog_solr_4_10_4`
    c. Inside this folder add the following files and folders

        data/
        conf/
            protwords.txt
            stopwords.txt
            synonyms.txt
            schema.xml
            solrconfig.xml
            lang/
                stopwords_en.txt

3. Add starter info to solrconfig ::

    <?xml version="1.0" encoding="utf-8" ?>
    <config>
        <luceneMatchVersion>LUCENE_36</luceneMatchVersion>
        <requestHandler name="/select" class="solr.StandardRequestHandler"
        default="true" />
        <requestHandler name="/update" class="solr.UpdateRequestHandler" />
        <requestHandler name="/admin" class="solr.admin.AdminHandlers" />
        <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
            <lst name="invariants">
            <str name="qt">search</str>
            <str name="q">*:*</str>
            </lst>
        </requestHandler>
    </config>

4. Add starter info to schema :: 

    <?xml version="1.0" ?>
    <schema name="default" version="1.5">
    </schema>

5. In CoreAdmin, click Add Core. Change only `name` and `instanceDir` both to blog_solr_4_10_4
6. Core should be added.
