{% extends "choralcentral_base.html" %}
{% load static %}
{% block title %}Midi index{% endblock %}

{% block left_sidebar %}{% endblock left_sidebar %}
{% block introduction %}{% endblock %}
{% block right_sidebar %}{% endblock right_sidebar %}

{% block content_content %}

   <div class="container">
        <h2 class="my-4 text-center text-lg-left">Midis</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead class="thead-light">
                    <caption>midis</caption>
                </thead>
                <tr>
                    <th>Song</th>
                    <th>Uploader</th>
                    <th>Format</th>
                    <th>midi uploader</th>
                    <th>Download</th>
                    <th>Drive url</th>
                    <th>Disk url</th>
                </tr>

                {% if midis %}
                <tbody>
                    {% for midi in midis %}
                        <tr>
                            <td>{{ midi.song.title }}</td>
                            <td>{{ midi.song.originator }}</td>
                            <td>
                                {% if '.mp3' in midi.media_file.url %}
                                mp3
                                {% else %}
                                midi
                                {% endif %}
                            </td>
                            <td>{{ midi.uploader }}</td>
                            <td>
                               {% if '.mp3' in midi.media_file.url %}
                                <p class='text-left'>
                                    <a href="{% url 'song-media:play_midiview' midi.pk %}" target="_blank"><i class="fas fa-play"></i></a>
                                </p>
                                {% else %}
                                <p class='text-left'>
                                    <a class='text-success' href="" onClick="MIDIjs.play('{{ midi.media_file.url }}');"><i class='fas fa-play'></i></a> |
                                    <a href="" onClick="MIDIjs.stop();"><i class='fas fa-stop'></i></a>
                                </p>
                                {% endif %}
                            </td>
                            <td>{{ midi.drive_url }}</td>
                            <td>{{ midi.media_file.url }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                {% else %}
                    <p>No midis found</p>
                {% endif %}
            </table>
        </div>
    </div>

{% endblock content_content %}
{% block footer %}{% endblock %}
