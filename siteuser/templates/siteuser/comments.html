{% extends "choralcentral_base.html" %}
{% block title %}{{ siteuser.screen_name }}'s comments{% endblock title %}
{% block introduction %}{% endblock introduction %}
{% load blog_ttags %}
{% block content_content %}

<div class='container song-actions'>
    <div class='row'>
        <div class='col-sm-12 head-title'>
            <span class='h5 float-left'>
                Comments made by <a href="{% url 'siteuser:detail' siteuser.pk siteuser.slug %}">{{ siteuser.screen_name }}</a>
            </span>

            <span class='float-right song-icons'>
                <button class="icon-buttons">
                    <a href="{% url 'blog-api:user_comments_api' siteuser.pk %}" title="Download {{ siteuser.screen_name }}'s comments "><i class="fas fa-download"></i> Download</a>
                </button>
            </span>
        </div>
    </div>
</div>

{% for comment in siteuser.comment_set.all %}
    <div class="list-comments">
        <div class="row commenter-stats">
            <div class='col-sm-12'>
                <strong>
                    <a href="{% url 'blog:detail' comment.post.pk comment.post.slug %}">{{ comment.post }}</a>
                    <span class="float-right">
                        Posted {{ comment.created|date:"d-m-Y" }} |
                        Modified {{ comment.modified|date:"d-m-Y" }}
                    </span>
                </strong>
            </div>
        </div>

        <div class='comment-body'>
            {{ comment.comment|markdown_format }}
        </div>

        <span class='float-left'>
            <button class="icon-buttons">
                {{ comment.like_count }}
            </button>
            <button class="icon-buttons">
                <a href='#'><i class='fas fa-star'></i></a>
            </button>
        </span>

        <span class='float-right'>
            {% if request.user == comment.creator.user %}
            <button class="icon-buttons">
                <a href="{% url 'blog:comment_edit' comment.pk %}"><i class="fas fa-edit"></i></a>
            </button>
            <button class="icon-buttons">
                <a href="{% url 'blog:comment_delete' comment.pk %}"><i class="fas fa-trash"></i></a>
            </button>
            {% endif %}
            <button class="icon-buttons">
                <a href="{% url 'blog:comment_reply' comment.pk comment.post.pk %}"><i class="fas fa-reply"></i></a>
            </button>
        </span>
    </div>
{% empty %}
    <p>No comments to display</p>
{% endfor %}
{% endblock content_content %}
